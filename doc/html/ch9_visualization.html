<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>CARLsim: Chapter 9: Visualization</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="CARLsimStyles.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CARLsim
   &#160;<span id="projectnumber">3.0</span>
   </div>
   <div id="projectbrief">CARLsim: a GPU-accelerated SNN simulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="usergroup0.html"><span>User&#160;Guide</span></a></li>
      <li><a href="usergroup1.html"><span>Tutorial</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ch9_visualization.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Chapter 9: Visualization </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#ch9s1_matlab_oat">9.1 MATLAB Offline Analysis Toolbox</a><ul><li class="level2"><a href="#ch9s1s1_network_monitor">9.1.1 Network Monitor</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="ch9s1_matlab_oat"></a>
9.1 MATLAB Offline Analysis Toolbox</h1>
<dl class="section author"><dt>Author</dt><dd>Michael Beyeler In addition to the real-time monitors (see <a class="el" href="ch7_monitoring.html">Chapter 7: Monitoring</a>), <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> provides a versatile Offline Analysis Toolbox (OAT) written in MATLAB for the visualization and analysis of neuronal, synaptic, and network information.</dd></dl>
<p>The OAT is built to work straight out of the box, by operating on binary files that the <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> simulation creates by default. The easiest way to visualize network activity is to run a Network Monitor.</p>
<p>However, it is also possible to look at specific groups or connections, and to access the associated spike and weight binaries directly.</p>
<p>Before the OAT can be used, the folder "tools/offline_analysis_toolbox" must be added to the MATLAB path: </p>
<div class="fragment"><div class="line">addpath <span class="stringliteral">&quot;%%CARLSIM_ROOT_DIR/tools/offline_analysis_toolbox&quot;</span></div>
</div><!-- fragment --><p> In projects and tutorials, this can be easily achieved by running the script "initOAT.m" present in those directories.</p>
<p>Every Monitor comes with an InteractiveMode for plotting activity and weights. By default, plotting will occur at a predefined speed (5 frames per second), unless otherwise specified using the method setPlottingAttributes of MATLAB monitors. At any time, the user can hit key 'p' to pause plotting, or 'q' to quit. Hitting key 's' will enter stepping mode, which will freeze the current frame until the user either hits the 'right arrow' key (in order to step one frame forward) or the 'left arrow' key (in order to step one frame backward).</p>
<h2><a class="anchor" id="ch9s1s1_network_monitor"></a>
9.1.1 Network Monitor</h2>
<p>A Network Monitor can be used to monitor properties as well as the activity of a number of neuronal groups in a network.</p>
<p>Every <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> simulation automatically generates a simulation file ("sim_{name of network}.dat") that can be found in the results directory of a project or tutorial. After the simulation is done, plotting overall network activity is as easy as typing in a MATLAB console: </p>
<div class="fragment"><div class="line">&gt;&gt; NM = NetworkMonitor(<span class="stringliteral">&#39;results/sim_myNetwork.dat&#39;</span>);</div>
<div class="line">&gt;&gt; NM.plot;</div>
</div><!-- fragment --><p> This will parse the simulation file "results/sim_myNetwork.dat" (where "myNetwork" is the network name parameter passed to the <a class="el" href="classCARLsim.html" title="CARLsim User Interface This class provides a user interface to the public sections of CARLsimCore sou...">CARLsim</a> constructor; make sure the file exists) and extract all relevant network information, such as number and names of groups. For each of these groups, NetworkMonitor will look for spike files created via <a class="el" href="classSpikeMonitor.html" title="Class SpikeMonitor. ">SpikeMonitor</a> that follow the default file name pattern (i.e., "spk_{name of group}.dat").</p>
<p>An example output is shown in the figure below, of a network that consisted of a randomly connected 80-20 network.</p>
<div class="image">
<img src="9_networkmonitor.jpg" alt="9_networkmonitor.jpg"/>
<div class="caption">
NetworkMonitor example output.</div></div>
<p> Other plot types such as histograms, heat maps, and flow fields are available and can be mixed-and-matched. The plot type of each group can be set using setGroupPlotType: </p>
<div class="fragment"><div class="line">&gt;&gt; NM = NetworkMonitor(<span class="stringliteral">&#39;results/sim_myNetwork.dat&#39;</span>)</div>
<div class="line">                 simObj: [1x1 SimulationReader]</div>
<div class="line">          resultsFolder: &#39;results&#39;</div>
<div class="line">             groupNames: {<span class="stringliteral">&#39;excit&#39;</span>  <span class="stringliteral">&#39;inhib&#39;</span>  <span class="stringliteral">&#39;input&#39;</span>}</div>
<div class="line">          groupSubPlots: {[1]  [2]  [3]}</div>
<div class="line">            groupMonObj: {[1x1 <a class="code" href="classGroupMonitor.html">GroupMonitor</a>]  [1x1 <a class="code" href="classGroupMonitor.html">GroupMonitor</a>]  [1x1 <a class="code" href="classGroupMonitor.html">GroupMonitor</a>]}</div>
<div class="line">              errorMode: <span class="stringliteral">&#39;standard&#39;</span></div>
<div class="line">    supportedErrorModes: {<span class="stringliteral">&#39;standard&#39;</span>  <span class="stringliteral">&#39;warning&#39;</span>  <span class="stringliteral">&#39;silent&#39;</span>}</div>
<div class="line">&gt;&gt; NM.setGroupPlotType(<span class="stringliteral">&#39;excit&#39;</span>, <span class="stringliteral">&#39;histogram&#39;</span>);</div>
<div class="line">&gt;&gt; NM.setGroupPlotType(<span class="stringliteral">&#39;inhib&#39;</span>, <span class="stringliteral">&#39;flowfield&#39;</span>);</div>
</div><!-- fragment --><p> The result is shown in the figure below.</p>
<div class="image">
<img src="9_plottypes.jpg" alt="9_plottypes.jpg"/>
<div class="caption">
NetworkMonitor plot types.</div></div>
<p> Example usage: </p>
<div class="fragment"><div class="line">%  A) Automatically add all groups in the network</div>
<div class="line">     &gt;&gt; NM = NetworkMonitor(<span class="stringliteral">&#39;results/sim_random.dat&#39;</span>); % read sim file</div>
<div class="line">     &gt;&gt; NM.plot; % hit <span class="charliteral">&#39;p&#39;</span> to pause, <span class="charliteral">&#39;q&#39;</span> to quit</div>
<div class="line">     &gt;&gt; NM.recordMovie; % plots all groups and saves as <span class="stringliteral">&#39;movie.avi&#39;</span></div>
<div class="line">     &gt;&gt; NM.setGroupPlotType(<span class="stringliteral">&#39;inhib&#39;</span>,<span class="stringliteral">&#39;raster&#39;</span>); % <span class="keywordflow">switch</span> that group to raster</div>
<div class="line">     &gt;&gt; NM.removeGroup(<span class="stringliteral">&#39;input&#39;</span>); % exclude <span class="keyword">this</span> group from plotting    </div>
<div class="line">     &gt;&gt; % etc.</div>
<div class="line">%  B) Add groups one-by-one</div>
<div class="line">     &gt;&gt; NM = NetworkMonitor(<span class="stringliteral">&#39;results/sim_random.dat&#39;</span>,<span class="keyword">false</span>);</div>
<div class="line">     &gt;&gt; NM.addGroup(<span class="stringliteral">&#39;input&#39;</span>,<span class="stringliteral">&#39;raster&#39;</span>);</div>
<div class="line">     &gt;&gt; NM.plot(1:10,100); % frame=100ms, plot first 10 frames</div>
<div class="line">     &gt;&gt; % etc.</div>
<div class="line">%  C) Add groups whose spike files don<span class="stringliteral">&#39;t follow the default file name,</span></div>
<div class="line"><span class="stringliteral">%     say &#39;</span>spikeFile_{groupName}.ext<span class="stringliteral">&#39; instead of &#39;</span>spk_{groupName}.dat<span class="stringliteral">&#39;</span></div>
<div class="line"><span class="stringliteral">     &gt;&gt; NM = NetworkMonitor(&#39;</span>results/sim_random.dat<span class="stringliteral">&#39;,false);</span></div>
<div class="line"><span class="stringliteral">     &gt;&gt; NM.setSpikeFileAttributes(&#39;</span>spikeFile_<span class="charliteral">&#39;,&#39;</span>.ext<span class="stringliteral">&#39;)</span></div>
<div class="line"><span class="stringliteral">     &gt;&gt; NM.addAllGroupsFromFile()</span></div>
</div><!-- fragment --><dl class="section since"><dt>Since</dt><dd>v3.0 </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Feb 17 2015 09:46:40 for CARLsim by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
